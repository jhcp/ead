<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Notas</title>
</head>
<body>

<!DOCTYPE html>
<html>
<title>Nota (Linguagem de Programação)</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Roboto'>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
    html,body,h1,h2,h3,h4,h5,h6 {font-family: "Roboto", sans-serif}
</style>
<body class="w3-light-grey">

<div id="search-matricula" class="w3-content w3-margin-top" style="max-width:1400px;">
    <div class="w3-row-padding">
        <div class="w3-third">.</div>
        <div class="w3-third">
            <div class="w3-white w3-text-grey w3-card-4">
                <div class="w3-display-container" style="padding: 15px">
                    <br>
                    <p>Matrícula: <input id="matricula-input"></p>
                    <p style="text-align: center;"><button onclick="mostrarNota();">visualizar nota</button></p>
                    <div class="w3-light-grey w3-round-xlarge">
                        <p>Para visualizar a sua nota, digite a sua matrícula no campo
                        acima e clique no botão "visualizar nota". Você pode descobrir o seu número de matrícula no SIGAA.
                        Se tiver algum problema com a sua nota fale comigo imediatamente pelo whatsapp.</p>
                    </div>
                    <br>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Page Container -->
<div id="student-container" class="w3-content w3-margin-top" style="max-width:1400px; display:none;">

    <!-- The Grid -->
    <div class="w3-row-padding">

        <!-- Left Column -->
        <div class="w3-third">

            <div class="w3-white w3-text-grey w3-card-4">
                <div class="w3-display-container">
                    <br><br><br>
                    <div class="w3-display-bottomleft w3-container w3-text-black">
                        <h2 id="matricula-lbl">matrícula</h2>
                    </div>
                </div>
                <div class="w3-container">
                    <div style="text-align: center; width: fit-content">
                    <div style="font-size: 5em; line-height: 1">
                        <span id="nota-total-alcancada-lbl1">a</span>/
                        <span id="nota-total-ofertada-lbl1">b</span>
                    </div>
                    nota
                    </div>


<!--                    <p><i class="fa fa-briefcase fa-fw w3-margin-right w3-large w3-text-teal"></i>Designer</p>-->
<!--                    <p><i class="fa fa-home fa-fw w3-margin-right w3-large w3-text-teal"></i>London, UK</p>-->
<!--                    <p><i class="fa fa-envelope fa-fw w3-margin-right w3-large w3-text-teal"></i>ex@mail.com</p>-->
<!--                    <p><i class="fa fa-phone fa-fw w3-margin-right w3-large w3-text-teal"></i>1224435534</p>-->
<!--                    <hr>-->

                    <p class="w3-large"><b><i class="fa fa-asterisk fa-fw w3-margin-right w3-text-teal"></i>Distribuição das notas</b></p>
                    <p>Atividades</p>
                    <div class="w3-light-grey w3-round-xlarge">
                        <div id="pct-atividades-bar" class="w3-container w3-center w3-round-xlarge w3-teal" style="width:90%">90%</div>
                    </div>
                    <p>WhatsApp</p>
                    <div class="w3-light-grey w3-round-xlarge">
                        <div class="w3-light-grey w3-round-xlarge">
                            <div id="pct-whatsapp-bar" class="w3-container w3-center w3-round-xlarge w3-teal" style="width:50%">50%</div>
                        </div>
<!--                        <div class="w3-container w3-center w3-round-xlarge w3-teal" style="width:80%">-->
<!--                            <div class="w3-center w3-text-white">80%</div>-->
<!--                        </div>-->
                    </div>
                    <p>Projeto</p>
                    <div class="w3-light-grey w3-round-xlarge">
                        <div id="pct-projeto-bar" class="w3-container w3-center w3-round-xlarge w3-teal" style="width:90%">90%</div>
                    </div>
                    <br>
                    <p>última atualização: 05/11/2020</p>

                </div>
            </div><br>

            <!-- End Left Column -->
        </div>

        <!-- Right Column -->
        <div class="w3-twothird">

            <div class="w3-container w3-card w3-white w3-margin-bottom">
                <h2 class="w3-text-grey w3-padding-16"><i class="fa fa-suitcase fa-fw w3-margin-right w3-xxlarge w3-text-teal"></i>Detalhamento das notas</h2>
                <p>Até agora já foram ofertados <span id="nota-total-ofertada-lbl2">b</span> pontos, dos quais você conquistou <span id="nota-total-alcancada-lbl2">a</span>.</p>
                <div class="w3-container">
                    <h5 class="w3-opacity"><b>Atividades (5 pontos)</b></h5>
                    <p>
                        Teremos 10 atividades no total, mas somente as suas 8 maiores notas serão consideradas. Isso
                        permite que você não seja prejudicado(a) caso passe por uma má fase durante o semestre.
                        Sendo assim,
                        cada atividade vale até 0.625 pontos, mas as duas piores notas serão descartadas.
                    </p>
                    <p>Cada atividade teve um prazo de pelo menos 10 dias.</p>
                    <p><b>SUA NOTA:</b> dos <span id="nota-atividades-ofertada-lbl">c</span> pontos de atividade ofertados, você alcançou <b><span id="nota-atividades-alcancada-lbl">d</span></b> pontos.</p>
                    <table style="text-align: center;">
                        <tr>
                            <th>Atividade</th><th>Nota na atividade (0 a 10)</th><th>Nota ponderada (0 a 0.625)</th>
                        </tr>
                        <tr id="linha-at-1"><td>Atividade 1</td><td id="nota-atividade-1">at1</td><td id="nota-atividade-1-ponderada">at1p</td></tr>
                        <tr id="linha-at-2"><td>Atividade 2</td><td id="nota-atividade-2">at2</td><td id="nota-atividade-2-ponderada">at2p</td></tr>
                        <tr id="linha-at-3"><td>Atividade 3</td><td id="nota-atividade-3">at3</td><td id="nota-atividade-3-ponderada">at3p</td></tr>
                        <tr id="linha-at-4"><td>Atividade 4</td><td id="nota-atividade-4">at4</td><td id="nota-atividade-4-ponderada">at4p</td></tr>
                        <tr id="linha-at-5"><td>Atividade 5</td><td id="nota-atividade-5">at5</td><td id="nota-atividade-5-ponderada">at5p</td></tr>
                        <tr id="linha-at-6"><td>Atividade 6</td><td id="nota-atividade-6">at6</td><td id="nota-atividade-6-ponderada">at6p</td></tr>
                        <tr id="linha-at-7"><td>Atividade 7</td><td id="nota-atividade-7">at7</td><td id="nota-atividade-7-ponderada">at7p</td></tr>
                        <tr id="linha-at-8"><td>Atividade 8</td><td id="nota-atividade-8">at8</td><td id="nota-atividade-8-ponderada">at8p</td></tr>
                        <tr id="linha-at-9"><td>Atividade 9</td><td id="nota-atividade-9">at9</td><td id="nota-atividade-9-ponderada">at9p</td></tr>
                        <tr id="linha-at-10"><td>Atividade 10</td><td id="nota-atividade-10">at10</td><td id="nota-atividade-10-ponderada">at10p</td></tr>
                    </table>
                    <i>OBS: as notas destacadas em vermelho não foram consideradas no cálculo da nota total, visto que
                        apenas as 8 maiores notas de atividades são consideradas.</i>
                    <hr>
                </div>
                <div class="w3-container">
                    <h5 class="w3-opacity"><b>Participação no WhatsApp (2 pontos)</b></h5>
                    <p>
                        A participação no WhatsApp será dividida em 2 notas: 1 ponto para a primeira
                        metade do curso e 1 ponto para a segunda metade do curso. Exemplos de participação:
                        - Dúvidas sobre o assunto (material, lives, etc.);
                        - Dúvidas sobre as atividades;
                        - Responder às dúvidas dos colegas;
                        - Compartilhar coisas que você já aprendeu, inclusive coisas que não fazem parte do nosso material;
                        - Compartilhar recursos interessantes, como livros, sites e vídeos;
                        - Compartilhar curiosidades sobre computação;
                        - Comentar sobre filmes, séries, livros etc. que têm a ver com computação;
                        - Discutir sobre o impacto da computação no nosso dia-a-dia;
                        - Mandar avisos sobre a disciplina;
                        - Sugestões para melhorar o material do curso;
                        - Sugestões de novas atividades e dinâmicas para fazermos nas lives.
                    </p>
                    <p><b>SUA NOTA:</b> dos <span id="nota-whatsapp-ofertada-lbl">e</span> pontos de WhatsApp ofertados, você alcançou <b><span id="nota-whatsapp-alcancada-lbl">d</span></b> ponto(s).</p>
                    <table style="text-align: center;">
                        <tr>
                            <th>Atividade</th><th>Nota na metade (0 a 10)</th><th>Nota ponderada (0 a 1)</th>
                        </tr>
                        <tr><td>1ª Metade</td><td id="nota-whatsapp-1">wa1</td><td id="nota-whatsapp-1-ponderada">wa1p</td></tr>
                        <tr><td>2ª Metade</td><td id="nota-whatsapp-2">wa2</td><td id="nota-whatsapp-2-ponderada">wa2p</td></tr>
                    </table>
                    <hr>
                </div>
                <div class="w3-container">
                    <h5 class="w3-opacity"><b>Projeto (3 pontos)</b></h5>
                    <p>
                        O nosso projeto tem 3 partes, cada uma valendo um ponto.
                    </p><br>
                    <p><b>SUA NOTA:</b> dos <span id="nota-projeto-ofertada-lbl">f</span> pontos de projeto ofertados, você alcançou <b><span id="nota-projeto-alcancada-lbl">g</span></b> ponto(s).</p>
                    <table style="text-align: center;">
                        <tr>
                            <th>Parte do projeto</th><th>Nota na parte (0 a 10)</th><th>Nota ponderada (0 a 1)</th><th>Observação</th>
                        </tr>
                        <tr><td>Parte 1</td><td id="nota-projeto-1">p1</td><td id="nota-projeto-1-ponderada">p1p</td><td id="nota-projeto-1-observacao">p1o</td></tr>
                        <tr><td>Parte 2</td><td id="nota-projeto-2">p2</td><td id="nota-projeto-2-ponderada">p2p</td><td id="nota-projeto-2-observacao">p2o</td></tr>
                        <tr><td>Parte 3</td><td id="nota-projeto-3">p3</td><td id="nota-projeto-3-ponderada">p3p</td><td id="nota-projeto-3-observacao">p3o</td></tr>
                    </table>
                    <hr>
                </div>
            </div>

            <div class="w3-container w3-card w3-white">
                <h2 class="w3-text-grey w3-padding-16"><i class="fa fa-certificate fa-fw w3-margin-right w3-xxlarge w3-text-teal"></i>Outras informações</h2>
                <div class="w3-container">
                    <h5 class="w3-opacity"><b>Similaridade excessiva</b></h5>
                    <p>Alguns projetos apresentaram similaridade excessiva, mesmo que parcial, com outros projetos, resultando em prejuízo
                        na nota. Isso não quer dizer que você, especificamente,
                        copiou de alguém. Não irei fornecer informações adicionais como, por exemplo, "qual o trecho similar?" ou
                        "qual a outra equipe que ficou similar?". A identificação de similiaridade foi feita de forma criteriosa,
                        cada caso sendo analisado individualmente. Nos casos em que houve margem para dúvidas, não foi
                        aplicada penalização na nota.</p>
                    <hr>
                </div>
                <div class="w3-container">
                    <h5 class="w3-opacity"><b>SIGAA</b></h5>
                    <p>A disciplina tem uma única nota, que é o somatório da pontuação alcançada ao longo do semestre. Não haverá
                        divisão entre 1ª V.A., 2ª V.A. e 3ª V.A.. A nota só será inserida no SIGAA ao final do semestre.</p>
                    <hr>
                </div>
                <div class="w3-container">
                    <h5 class="w3-opacity"><b>Erro na nota</b></h5>
                    <p>Se você discorda de alguma nota atribuída a você, me procure imediatamente pelo WhatsApp.</p>
                    <hr>
                </div>
                <div class="w3-container">
                    <h5 class="w3-opacity"><b>Final</b></h5>
                    <p>Haverá uma avaliação final para aqueles que tenham alcançado entre 3 e 7 pontos ao longo
                    do semestre. A avaliação final será na terça-feira, 10/11, às 9h da manhã.</p><br>
                </div>
            </div>

            <!-- End Right Column -->
        </div>

        <!-- End Grid -->
    </div>

    <!-- End Page Container -->
</div>

<footer class="w3-container w3-teal w3-center w3-margin-top">
    <p><a href="https://jhcp.github.io/ead/LP/2020-PLE-2/">voltar para o site da disciplina</a></p>
    <p>Baseado em template de <a href="https://www.w3schools.com/w3css/default.asp" target="_blank">w3.css</a></p>
</footer>

<script>
    let ofertadaAtividades = 0.625*8;
    let ofertadaWhatsapp = 2;
    let ofertadaProjeto = 3;

    notas = [
        {id: 0, at1: 10, at2: 10, at3: 10, at4: 10, wa1: 10, at5: 10, at6: 10, proj1: 10, at7: 10, at8: 0, proj2: 10, at9: 0, at10: 10, wa2: 5, proj3: 5},

        /* quarta */
    ];


    function findStudent(student) {
        return student.id == this;
    }


    function calcularNotas() {
        notas.forEach(function (currentStudent) {
            if (currentStudent.proj1 == -1) currentStudent.proj1 = 0;
            if (currentStudent.proj2 == -1) currentStudent.proj2 = 0;
            if (currentStudent.proj3 == -1) currentStudent.proj3 = 0;
            let notasAtividades = [currentStudent.at1, currentStudent.at2, currentStudent.at3, currentStudent.at4,
                currentStudent.at5, currentStudent.at6, currentStudent.at7, currentStudent.at8, currentStudent.at9, currentStudent.at10 ];
            let min1 = Math.min.apply(null, notasAtividades);
        })
    }
    function mostrarNota() {
        let matricula = document.getElementById("matricula-input").value;
        let currentStudent = notas.filter(findStudent, matricula);
        if (currentStudent.length != 1) {
            alert("Nota não encontrada. Verifique seu número de matrícula e tente novamente.")
            return;
        }

        currentStudent = currentStudent[0];
        if (currentStudent.proj1 == -1) {
            currentStudent.proj1entregue = false;
            currentStudent.proj1 = 0;
        }
        else {
            currentStudent.proj1entregue = true;
        }
        if (currentStudent.proj2 == -1) {
            currentStudent.proj2entregue = false;
            currentStudent.proj2 = 0;
        }
        else {
            currentStudent.proj2entregue = true;
        }
        if (currentStudent.proj3 == -1) {
            currentStudent.proj3entregue = false;
            currentStudent.proj3 = 0;
        }
        else {
            currentStudent.proj3entregue = true;
        }

        /* change this block todo */
        let notasAtividades = [currentStudent.at1, currentStudent.at2, currentStudent.at3, currentStudent.at4,
            currentStudent.at5, currentStudent.at6, currentStudent.at7, currentStudent.at8, currentStudent.at9, currentStudent.at10 ];
        console.log('original:', notasAtividades);
        let min1 = Math.min.apply(null, notasAtividades);
        let min1position = notasAtividades.indexOf(min1);
        notasAtividades[min1position] = 9999;
        let min2 = Math.min.apply(null, notasAtividades);
        let min2position = notasAtividades.indexOf(min2);
        notasAtividades[min2position] = 9999;
        console.log('menor1:', min1);
        console.log('menor2:', min2);
        console.log('sem os menores:', notasAtividades);
        notasAtividades.splice(notasAtividades.indexOf(9999), 1);
        notasAtividades.splice(notasAtividades.indexOf(9999), 1);
        function somar(total, num) {
            return total + num;
        }
        let somaNotasAtividades = notasAtividades.reduce(somar);
        console.log('soma:', somaNotasAtividades);

        let notaAtividades = ((somaNotasAtividades)/10)*0.625;
        let notaWhatsapp = (currentStudent.wa1 + currentStudent.wa2)/10;
        let notaProjeto = (currentStudent.proj1 + currentStudent.proj2 + currentStudent.proj3)/10;
        let notaTotal = (+notaAtividades.toFixed(2) + +notaWhatsapp.toFixed(2) + +notaProjeto.toFixed(2)).toFixed(2);  // based on A Kunin's answer at https://stackoverflow.com/questions/11832914/round-to-at-most-2-decimal-places-only-if-necessary

        let ofertadaTotal = ofertadaAtividades + ofertadaWhatsapp + ofertadaProjeto;

        document.getElementById("matricula-lbl").innerHTML = currentStudent.id;
        document.getElementById("nota-total-alcancada-lbl1").innerHTML = notaTotal;
        document.getElementById("nota-total-alcancada-lbl2").innerHTML = notaTotal;
        document.getElementById("nota-total-ofertada-lbl1").innerHTML = ofertadaTotal;
        document.getElementById("nota-total-ofertada-lbl2").innerHTML = ofertadaTotal;

        pctAtividades = notaAtividades/ofertadaAtividades;
        document.getElementById("pct-atividades-bar").innerHTML = pctAtividades.toFixed(2)*100 + "%";
        document.getElementById("pct-atividades-bar").style.width = pctAtividades.toFixed(2)*100 + "%";
        pctWhatsapp = (notaWhatsapp)/ofertadaWhatsapp;
        document.getElementById("pct-whatsapp-bar").innerHTML = pctWhatsapp.toFixed(2)*100 + "%";
        document.getElementById("pct-whatsapp-bar").style.width = pctWhatsapp.toFixed(2)*100 + "%";
        pctProjeto = notaProjeto/ofertadaProjeto;
        document.getElementById("pct-projeto-bar").innerHTML = pctProjeto.toFixed(2)*100 + "%";
        document.getElementById("pct-projeto-bar").style.width = pctProjeto.toFixed(2)*100 + "%";



        document.getElementById("nota-atividades-alcancada-lbl").innerHTML = notaAtividades.toFixed(2);
        document.getElementById("nota-atividades-ofertada-lbl").innerHTML = ofertadaAtividades;
        document.getElementById("nota-atividade-1").innerHTML = currentStudent.at1;
        document.getElementById("nota-atividade-1-ponderada").innerHTML = ((currentStudent.at1/10)*0.625).toFixed(3);
        document.getElementById("nota-atividade-2").innerHTML = currentStudent.at2;
        document.getElementById("nota-atividade-2-ponderada").innerHTML = ((currentStudent.at2/10)*0.625).toFixed(3);
        document.getElementById("nota-atividade-3").innerHTML = currentStudent.at3;
        document.getElementById("nota-atividade-3-ponderada").innerHTML = ((currentStudent.at3/10)*0.625).toFixed(3);
        document.getElementById("nota-atividade-4").innerHTML = currentStudent.at4;
        document.getElementById("nota-atividade-4-ponderada").innerHTML = ((currentStudent.at4/10)*0.625).toFixed(3);
        document.getElementById("nota-atividade-5").innerHTML = currentStudent.at5;
        document.getElementById("nota-atividade-5-ponderada").innerHTML = ((currentStudent.at5/10)*0.625).toFixed(3);
        document.getElementById("nota-atividade-6").innerHTML = currentStudent.at6;
        document.getElementById("nota-atividade-6-ponderada").innerHTML = ((currentStudent.at6/10)*0.625).toFixed(3);
        document.getElementById("nota-atividade-7").innerHTML = currentStudent.at7;
        document.getElementById("nota-atividade-7-ponderada").innerHTML = ((currentStudent.at7/10)*0.625).toFixed(3);
        document.getElementById("nota-atividade-8").innerHTML = currentStudent.at8;
        document.getElementById("nota-atividade-8-ponderada").innerHTML = ((currentStudent.at8/10)*0.625).toFixed(3);
        document.getElementById("nota-atividade-9").innerHTML = currentStudent.at9;
        document.getElementById("nota-atividade-9-ponderada").innerHTML = ((currentStudent.at9/10)*0.625).toFixed(3);
        document.getElementById("nota-atividade-10").innerHTML = currentStudent.at10;
        document.getElementById("nota-atividade-10-ponderada").innerHTML = ((currentStudent.at10/10)*0.625).toFixed(3);
        document.getElementById('linha-at-' + (min1position + 1)).style = 'background-color: red; color: white';
        document.getElementById('linha-at-' + (min2position + 1)).style = 'background-color: red; color: white';

        document.getElementById("nota-whatsapp-alcancada-lbl").innerHTML = notaWhatsapp;
        document.getElementById("nota-whatsapp-ofertada-lbl").innerHTML = ofertadaWhatsapp;
        document.getElementById("nota-whatsapp-1").innerHTML = currentStudent.wa1;
        document.getElementById("nota-whatsapp-1-ponderada").innerHTML = (currentStudent.wa1/10)*1;
        document.getElementById("nota-whatsapp-2").innerHTML = currentStudent.wa2;
        document.getElementById("nota-whatsapp-2-ponderada").innerHTML = (currentStudent.wa2/10)*1;

        document.getElementById("nota-projeto-alcancada-lbl").innerHTML = notaProjeto;
        document.getElementById("nota-projeto-ofertada-lbl").innerHTML = ofertadaProjeto;
        document.getElementById("nota-projeto-1").innerHTML = currentStudent.proj1;
        document.getElementById("nota-projeto-1-ponderada").innerHTML = (currentStudent.proj1/10)*1;
        if (currentStudent.proj1entregue) {
            document.getElementById("nota-projeto-1-observacao").innerHTML = '';
        }
        else {
            document.getElementById("nota-projeto-1-observacao").innerHTML = 'não entregue';
        }
        document.getElementById("nota-projeto-2").innerHTML = currentStudent.proj2;
        document.getElementById("nota-projeto-2-ponderada").innerHTML = (currentStudent.proj2/10)*1;
        if (currentStudent.proj2entregue) {
            if (currentStudent.proj2 < 4) {
                document.getElementById("nota-projeto-2-observacao").innerHTML = 'similaridade excessiva';
            }
            else {
                document.getElementById("nota-projeto-2-observacao").innerHTML = '';
            }
        }
        else {
            document.getElementById("nota-projeto-2-observacao").innerHTML = 'não entregue';
        }
        document.getElementById("nota-projeto-3").innerHTML = currentStudent.proj3;
        document.getElementById("nota-projeto-3-ponderada").innerHTML = (currentStudent.proj3/10)*1;
        if (currentStudent.proj3entregue) {
            document.getElementById("nota-projeto-3-observacao").innerHTML = '';
        }
        else {
            document.getElementById("nota-projeto-3-observacao").innerHTML = 'não entregue';
        }


        document.getElementById("student-container").style.display = 'block';
        document.getElementById("search-matricula").style.display = 'none';
    };


</script>
</body>
</html>


</body>
</html>